<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>ImÃ¡genes Amigas de Nuestro Entorno</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 2em;
      text-align: center;
      overflow-x: hidden;
    }
    h1 {
      color: #333;
    }
    .galeria {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1em;
      margin-top: 2em;
    }
    .galeria img {
      width: 220px;
      border-radius: 6px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .galeria img:hover {
      transform: scale(1.05);
    }

    .visor {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
      padding: 1em;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .visor.visible {
      display: flex;
      opacity: 1;
    }
    .visor img {
      max-width: 90%;
      max-height: 80vh;
      border-radius: 6px;
      box-shadow: 0 0 20px rgba(0,0,0,0.8);
      transition: transform 0.3s ease;
    }
    .descripcion {
      color: #fff;
      margin-top: 1em;
      font-size: 1.1em;
      max-width: 90%;
      max-height: 150px;
      overflow-y: auto;
      white-space: pre-line;
      background: rgba(0,0,0,0.4);
      padding: 0.8em 1em;
      border-radius: 6px;
      box-sizing: border-box;
    }
    .cerrar {
      position: absolute;
      top: 1em;
      right: 1.5em;
      font-size: 2.5em;
      color: #fff;
      cursor: pointer;
      user-select: none;
    }
    .flechas {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      padding: 0 1em;
      z-index: 10000;
    }
    .flechas span {
      font-size: 3em;
      color: #fff;
      cursor: pointer;
      user-select: none;
      width: 2em;
      text-align: center;
      transition: color 0.2s;
    }
    .flechas span:hover {
      color: #ffcc00;
    }

    .flechas span:first-child {
      margin-left: 0.5em;
    }
    .flechas span:last-child {
      margin-right: 0.5em;
    }

    .descripcion::-webkit-scrollbar {
      width: 8px;
    }
    .descripcion::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    @media (max-width: 768px) {
      .visor img {
        max-height: 60vh;
      }

      .descripcion {
        max-height: 30vh;
        font-size: 1em;
      }

      .flechas span {
        font-size: 2.5em;
      }

      .cerrar {
        font-size: 2em;
      }
    }

    /* ðŸ‘‡ NUEVO ajuste: mejora en horizontal mÃ³vil */
    @media (orientation: landscape) and (max-width: 900px) {
      .visor img {
        max-height: 80vh;
      }

      .descripcion {
        max-height: 70vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }
    }
  </style>
</head>
<body>

  <h1>ImÃ¡genes Amigas de Nuestro Entorno</h1>

  <div class="galeria">

    <img
      loading="lazy"
      src="Foto_008_Monolito-moralo.jpg"
      alt="Monolito moralo"
      data-desc="11 de junio de 2020. Â¡Hola amigas/os, buenos dÃ­as! Con esta perspectiva del monolito moralo que engalana la rotonda de la carretera de ValdehÃºncar dando rienda suelta a la imaginaciÃ³n segÃºn desde donde se observe. En este caso se nos antoja como un gran dinosaurio enamorado de la Piedra Caballera, a la que no puede dejar de mirar petrificado por su belleza. Â¡Feliz jueves! Foto: PdE">

    <img
      loading="lazy"
      src="Foto_007_Fuente-San-Isidro.jpg"
      alt="Fuente San Isidro"
      data-desc="14 de marzo de 2021. Reflejos al atardecer en la fuente del parque frente a la ermita de San Isidro. En Navalmoral de la Mata, para â€œImÃ¡genes amigas de nuestro entornoâ€. | DJI Fly">

    <img
      loading="lazy"
      src="Foto_006_Charca-Mayen.jpg"
      alt="Charca Mayen"
      data-desc="19 de marzo de 2021. Ya se deja notar la primavera en Navalmoral, con su paleta de colores en la fuente de la Teja y sus alrededores. Fuente la Teja en Navalmoral de la Mata. | Yoguiflyâ€™s | PdE">
    <img
      loading="lazy"
      src="Foto_005_fuente-la-Teja.jpg"
      alt="Fuente La Teja"
      data-desc="28 de marzo de 2021. Ya se deja notar la primavera en Navalmoral, con su paleta de colores en la fuente de la Teja y sus alrededores. Fuente la Teja en Navalmoral de la Mata. | Yoguiflyâ€™s | PdE">

    <img
      loading="lazy"
      src="Foto_004_mirador_Las_Ollas.jpg"
      alt="Mirador Las Hollas"
      data-desc="3 de abril de 2021. El mirador en el Paraje Las Ollas, en Cuacos de Yuste, protagonista este mes en â€œImÃ¡genes amigas de nuestro entornoâ€. | PdE">

    <img
      loading="lazy"
      src="Foto_003_orquidea.jpg"
      alt="OrquÃ­dea silvestre"
      data-desc="9 de abril de 2021. Apoyada en una orquÃ­dea (ophrys scolopax), esta abeja (apis mellifera) parece estar reflexionando sobre su existencia, esperando a su pareja o averigua tÃºâ€¦, pero aquÃ­ donde la vemos obtuvo la menciÃ³n especial â€œPremio al mejor participante localâ€ con el tÃ­tulo Relamiendo_scolopax en el concurso Ochydarium 2019, y es la protagonista en esta ocasiÃ³n de â€œImÃ¡genes amigas de nuestro entornoâ€. La escena fue captada por Fernando SÃ¡nchez Castilla en el Sierro de Almaraz.">

    <img
      loading="lazy"
      src="Foto_002_trafico.jpg"
      alt="TrÃ¡fico en la peatonal"
      data-desc="15 de abril de 2022. AsÃ­ va el trÃ¡fico en la peatonal de Navalmoral de la Mata.">

    <img
      loading="lazy"
      src="Foto_001_Expacionavalmoral.jpg"
      alt="ExposiciÃ³n en Navalmoral de la Mata"
      data-desc="23 de mayo de 2021. Expacionavalmoral ha sido protagonista estos dÃ­as en la actualidad morala, entre otras cosas, por el aterrizaje de emergencia de una avioneta en una de sus avenidas. Buen momento para incluir esta fotografÃ­a, que nos ha hecho llegar Yoguiflyâ€™s, en â€œImÃ¡genes Amigas de nuestro entornoâ€.">

  </div>

  <div class="visor" id="visor" role="dialog" aria-modal="true" aria-labelledby="descripcion">
    <span class="cerrar" role="button" aria-label="Cerrar visor" tabindex="0"
          onclick="cerrarVisor()" onkeypress="if(event.key==='Enter') cerrarVisor()">Ã—</span>

    <div class="flechas">
      <span role="button" aria-label="Imagen anterior" tabindex="0"
            onclick="cambiarImagen(-1)" onkeypress="if(event.key==='Enter') cambiarImagen(-1)">â€¹</span>
      <span role="button" aria-label="Imagen siguiente" tabindex="0"
            onclick="cambiarImagen(1)" onkeypress="if(event.key==='Enter') cambiarImagen(1)">â€º</span>
    </div>

    <img id="imagenGrande" src="" alt="" loading="eager" />
    <div class="descripcion" id="descripcion"></div>
  </div>

  <script>
    const imagenes = document.querySelectorAll('.galeria img');
    const visor = document.getElementById('visor');
    const imagenGrande = document.getElementById('imagenGrande');
    const descripcion = document.getElementById('descripcion');
    let indiceActual = 0;

    function bloquearScroll(bloquear) {
      document.body.style.overflow = bloquear ? 'hidden' : '';
    }

    imagenes.forEach((img, i) => {
      img.addEventListener('click', () => {
        indiceActual = i;
        mostrarImagen();
        visor.classList.add('visible');
        bloquearScroll(true);
        precargarVecinas();
      });
    });

    function mostrarImagen() {
      const img = imagenes[indiceActual];
      imagenGrande.src = img.src;
      imagenGrande.alt = img.alt;
      descripcion.textContent = img.dataset.desc;
    }

    function cerrarVisor() {
      visor.classList.remove('visible');
      bloquearScroll(false);
    }

    function cambiarImagen(direccion) {
      indiceActual = (indiceActual + direccion + imagenes.length) % imagenes.length;
      mostrarImagen();
      precargarVecinas();
    }

    function precargarVecinas() {
      const prev = imagenes[(indiceActual - 1 + imagenes.length) % imagenes.length].src;
      const next = imagenes[(indiceActual + 1) % imagenes.length].src;
      new Image().src = prev;
      new Image().src = next;
    }

    document.addEventListener('keydown', e => {
      if (visor.classList.contains('visible')) {
        if (e.key === 'ArrowRight') cambiarImagen(1);
        if (e.key === 'ArrowLeft') cambiarImagen(-1);
        if (e.key === 'Escape') cerrarVisor();
      }
    });

    function esElementoInterno(el) {
      return (
        el === imagenGrande ||
        el === descripcion ||
        el.closest('.flechas') ||
        el.classList.contains('cerrar')
      );
    }

    ['click', 'touchstart'].forEach(evt =>
      visor.addEventListener(evt, e => {
        if (!esElementoInterno(e.target)) {
          cerrarVisor();
        }
      })
    );
  </script>

</body>
</html>
